---
title: "Day 11: Kubernetes Authorization"
seoTitle: "Kubernetes Authorization Mechanism, RBAC, Roles, RoleBindings"
datePublished: Wed Nov 26 2025 15:34:40 GMT+0000 (Coordinated Universal Time)
cuid: cmig61412000102l89u5qeqa9
slug: day-11-kubernetes-authorization
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1764155035000/bb188b46-e877-4ca1-b16a-21896ee9834f.png
ogImage: https://cdn.hashnode.com/res/hashnode/image/upload/v1764171246179/a32c8d4a-5ed2-491c-ba16-278ce29d046d.png
tags: k8s-series

---

## Why Authorization

We restrict access to the cluster based on roles and namespaces of teams.

**Admin**\- full access.

**Developer**\- Read access but not delete.

**Bots**\- Limited access

## Authorization Mechanisms

### Node

Kube-apiserver accessed by user and kubelet to get information these requests validated by **node authorizer**, even validating certificates kubelet should part of system node group any request coming from user contains system node part of the node group authorized by node authorizer granted privileges.

### **ABAC** (Attributed Based Access Controller)

External access to the API, in ABAC we give access to user or group of users with set of policies we pass it in JSON format, Its difficult to manage.

### **RBAC** (Role Based Access Control)

Instead of we directly associating a user with group permissions we define a role. Ex: Developer, tester etc..

**Note**: Role and RoleBinding fall under **scope of namespaces,** so mention namespace name in object.

### **Create a Role:**

Getting access to Pods, configmaps within namespace.

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role  
metadata:
  name: developer
  namespace: dev-region   # must specify 
rules:
- apiGroups: [""]   #core group
  resources: ["pods"] 
  verbs: ["list", "get", "create", "update", "delete"] #access type
  resourceNames: ["employermatch", "401K"] # namespace has 5 pods, by using resourceNames we can restrict access to particular pods
- apiGroups: [""]
  resources: ["configmaps"]
  verbs: ["create"]

$ kubectl apply -f developer-role.yaml # create role
```

**How to attach role to User:** Use Role Binding concept

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding  
metadata:
  name: devuser-developer-binding
subjects:
- kind: User
  name: dev-user
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: developer   #role name should match
  apiGroup: rbac.authorization.k8s.io

$ kubectl apply -f devuser-developer-binding.yaml #create binding
```

**To view created role and bindings**

```bash
$ kubectl get roles # see list of roles
$ kubectl get rolebindings  # list of bindings

$ kubectl describe role kube-proxy -n kube-system  #describe role
Name:         kube-proxy
Labels:       <none>
Annotations:  <none>
PolicyRule:
  Resources   Non-Resource URLs  Resource Names  Verbs  # all deatils
  ---------   -----------------  --------------  -----
  configmaps  []                 [kube-proxy]    [get] 

$ kubectl describe rolebinding kube-proxy -n kube-system #role binding
Name:         kube-proxy
Labels:       <none>
Annotations:  <none>
Role:
  Kind:  Role
  Name:  kube-proxy
Subjects:
  Kind   Name                                             Namespace
  ----   ----                                             ---------
  Group  system:bootstrappers:kubeadm:default-node-token             #account details
```

**Check you have access to resources in particular cluster**

```bash
$ kubectl auth can-i create deployments 
yes
$ kubectl auth can-i delete nodes
no
$ kubectl auth can-i create deployments --as dev-user --namespace test #checking with user group
yes
```

### **Webhook**

If we want to use external mechanism to validate user, **Open Policy Agent** is 3rd party tool control Authorization, we can Kubernetes to make a api call to policy agent and agent will decide user valid or not based on response user granted access.

### **AlwaysAllow**

Allow all request without authorization.

### AlwaysDeny

Deny all request.

```bash
#check default request
$ kubectl describe pod kube-apiserver-controlplane -n kube-system
 kube-apiserver
      --advertise-address=192.168.242.175
      --allow-privileged=true
      --authorization-mode=Node,RBAC                  # check here
      --client-ca-file=/etc/kubernetes/pki/ca.crt
      --enable-admission-plugins=NodeRestriction
      --enable-bootstrap-token-auth=true
```